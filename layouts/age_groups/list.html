{{ define "main" }}
<div class="container">
  <div class="taxonomy-header">
    <h1>Events for {{ .Title | title }}</h1>
    <p class="taxonomy-description">
      {{ if eq .Title "beavers" }}
        Events suitable for Beavers (ages 6-8) - fun activities and basic scouting skills.
      {{ else if eq .Title "cubs" }}
        Events for Cubs (ages 8-11) - adventure activities and skill development.
      {{ else if eq .Title "scouts" }}
        Events for Scouts (ages 11-14) - outdoor adventures and leadership development.
      {{ else if eq .Title "venturers" }}
        Events for Venturers (ages 14-17) - challenging activities and community service.
      {{ else if eq .Title "rovers" }}
        Events for Rovers (ages 18-25) - leadership opportunities and advanced activities.
      {{ else if eq .Title "all" }}
        Events suitable for all age groups and families.
      {{ else }}
        Events for {{ .Title }} age group.
      {{ end }}
    </p>
  </div>

  <div class="taxonomy-navigation">
    <h3>Browse by Age Group:</h3>
    <div class="taxonomy-links">
      {{ range $name, $taxonomy := .Site.Taxonomies.age_groups }}
        <a href="{{ "/age_groups/" | relURL }}{{ $name | urlize }}" 
           class="taxonomy-link {{ if eq $name $.Title }}active{{ end }}">
          {{ $name | title }} ({{ $taxonomy.Count }})
        </a>
      {{ end }}
    </div>
  </div>

  <div class="events-grid">
    {{ $events := .Pages }}
    {{ if $events }}
      {{ range $events.ByParam "start_date" }}
        <article class="event-card">
          <div class="event-header">
            <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>
            <div class="event-meta">
              {{ partial "event-datetime.html" . }}
            </div>
          </div>
          
          <div class="event-details">
            <p class="event-location">
              <strong>Location:</strong> {{ .Params.location }}
            </p>
            
            <div class="event-description">
              {{ .Summary }}
            </div>
            
            <div class="event-taxonomies">
              {{ if .Params.event_types }}
                {{ range .Params.event_types }}
                  <span class="event-type-badge">{{ . | title }}</span>
                {{ end }}
              {{ end }}
              
              {{ if .Params.age_groups }}
                <div class="age-groups">
                  {{ range .Params.age_groups }}
                    <span class="age-group-badge">{{ . | title }}</span>
                  {{ end }}
                </div>
              {{ end }}
            </div>
          </div>
          
          <div class="event-actions">
            <a href="{{ .Permalink }}" class="read-more">Read More</a>
          </div>
        </article>
      {{ end }}
    {{ else }}
      <div class="no-events">
        <p>No events found for this age group.</p>
        <a href="{{ "/events/" | relURL }}" class="back-link">← View All Events</a>
      </div>
    {{ end }}
  </div>

  <div class="taxonomy-footer">
    <a href="{{ "/events/" | relURL }}" class="back-link">← Back to All Events</a>
  </div>
</div>
{{ end }}